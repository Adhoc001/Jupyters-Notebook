<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Team OTOG</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=JetBrains+Mono&display=swap" rel="stylesheet">

  <!-- Mermaid -->
  <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>

  <!-- CSS -->
  <link rel="stylesheet" href="styles.css" />
</head>

<body>

<header class="top-nav">
  <a href="index.html" class="nav-left" aria-label="Go to homepage">
    <span class="logo-emoji">ðŸ“š</span>
    <span class="logo-text">Jupyters Notebook</span>
  </a>

  <div class="nav-right">
    <input class="nav-search" type="search" placeholder="Relax di pa ni mo gana..." />
  </div>
</header>

<div class="layout">

  <!-- Sidebar -->
  <aside class="sidebar">
    <nav>
      <a class="parent">Overview
        <svg class="chevron" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
          <polyline points="6 9 12 15 18 9"></polyline>
        </svg>
      </a>
      <div class="submenu">
        <a href="index.html">Getting Started</a>
        <a href="architecture.html">Architecture</a>
        <a href="contributors.html">Contributors</a>
      </div>

      <a class="parent">Runbook
        <svg class="chevron" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
          <polyline points="6 9 12 15 18 9"></polyline>
        </svg>
      </a>
      <div class="submenu">
        <a href="whitelisting.html">Whitelisting</a>
        <a href="decommission.html" class="active">Decommissioning</a>
        <a href="customkernel.html">PR Review and Merge</a>
      </div>
    </nav>
  </aside>

  <!-- Main -->
  <main class="content" id="mainContent">

    <section id="pageBody">

      <!-- Page Header -->
      <section class="page-header">
        <h1>Cluster Decommisioning for Notebook</h1>
        <p>
          Steps to follow in terms of decommisioning a cluster
        </p>
      </section>

      <section class="explanation">
        <h3>Why do we need to decommision a cluster?</h3>
        <p>So users can avoid unnecessary charges for resources that are no longer in use.</p>
      </section>

      <!-- Diagram Section -->
      <section class="diagram-section">

        <div class="mermaid">
  flowchart TD
    A[<h2>Radar Process</h2>] --> B

    B[
      <div style="font-size:13px; line-height:0.6">
      
      <b style="font-size:15px;">EDIT RADAR</b><br><br>
      
      <span style="display:block; text-align:left;">
        <strong>Assignee:</strong> Your Name <br>
        <strong>State:</strong> Investigate / Prepare <br>
        <strong>Resolution:</strong> Unresolved <br>
        <strong>Priority:</strong> 3 <br>
        <strong>Set Proper Milestone</strong><br>
        <strong>Acknowledge:</strong><i> ''Hi Team, Acknowledged on this decommision request.''</i>
      </span>

        <div style="display:flex; justify-content:flex-end; padding-right:1.3rem;">
            <a href="#radartemplate" style="font-size:24px; color:#38bdf8; text-decoration: none;">ðŸ‘€</a>
        </div>
      
      </div>
    ]

    B --> C[<h2>Github Process</h2>]

    C --> D[<strong>acs-notebooks-controlplane-cloudtech</strong><br>exist in your local?]
    D --> |NO| E[
    <div style="font-size:13px; line-height:0.6">

      <span style="display:block; text-align:left;">
      1b. Fork this <a href="#" style="text-decoration: none; color: white;"><strong>GithubRepo</strong></a>
      </span>

      <span style="display:block; text-align:left;">
      2b. Clone your Fork to local using VScode terminal
      <div style="padding-left: 1.3rem;">
        <strong>
          $ git clone <i style="text-decoration: underline;">ssh-link-forked-repo-here</i>
        </strong>
      </div>
      </span>

      <span style="display:block; text-align:left;">
      3b. Go to the Local Repo Directory
      <div style="padding-left: 1.3rem;">
          <strong>
            $ cd <i style="text-decoration: underline;">acs-notebook-controlplane-cloudtech/</i>
          </strong>
      </div>
      </span>

      <span style="display:block; text-align:left;">
      4b. Add upstream remote
      <div style="padding-left: 1.3rem;">
        <strong>
          $ git remote add upstream <i style="text-decoration: underline;">ssh-link-original-repo-here</i>
        </strong>
      </div>
      </span>

      <span style="display:block; text-align:left;">
      5b. Confirm remote upstream
      <div style="padding-left: 1.3rem;">
        <strong>
          $ git remote -v
        </strong>
      </div>
      </span>

    </div>
    ]

    D --> |YES| F[
    <div style="font-size:13px; line-height:0.6">
      
      <b style="font-size:15px;">UPDATE YOUR REPO</b><br><br>

      <span style="display:block; text-align:left;">
      1a. Go to the Local Repo Directory
      <div style="padding-left: 1.3rem;">
          <strong>
            $ cd <i style="text-decoration: underline;">acs-notebook-controlplane-cloudtech/</i>
          </strong>
      </div>
      </span>
      
      <span style="display:block; text-align:left;">
      2a. Check remote upstream, if none, perform 4b
      <div style="padding-left: 1.3rem;">
        <strong>
          $ git remote -v
        </strong>
      </div>
      </span>

      <span style="display:block; text-align:left;">
      3a. Update Local Repo
      <div style="padding-left: 1.3rem;">
        <strong>
          $ git upstream main
        </strong>
      </div>
      </span>

      <span style="display:block; text-align:left;">
      4a. Update Fork Repo
      <div style="padding-left: 1.3rem;">
        <strong>
          $ git push origin main
        </strong>
      </div>
      </span>
    </div>
    ]

    F --> G[<h2>Manual Decommission</h2>]

    E --> G

    G --> H[<h4>Model Verification</h4>]

    H ==> |MODEL 1| I[
        <div style="display:block; text-align:center;">
            <a href="#model1" style="font-size:35px; text-decoration: none;">ðŸ“•</a>
        </div>
    ]
    
    H ==> |MODEL 2| J[
        <div style="display:block; text-align:center;">
            <a href="#model2" style="font-size:35px; text-decoration: none;">ðŸ“—</a>
        </div>
    ]

    I --> K[NO DATA FOR NOW]

    J --> L[
    <div style="font-size:13px; line-height:0.6">

      <span style="display:block; text-align:left;">
      1. Go to <strong>manualDecom.md</strong>
      </span>

      <span style="display:block; text-align:left;">
      2. Copy previous <i><strong>Decom</strong></i> from line <strong>9</strong> to <strong>23</strong>
      </span>

      <span style="display:block; text-align:left;">
      3. Edit this details:
      <div style="padding-left: 1.3rem;">
        <strong>
          ClusterID: <br>
          Cluster Name: <br>
          Cluster Display Name: <br>
          Identifier: <br>
          Pipeline Name: <br>
          Pipeline Link: <br>
          Radar Details:
        </strong>
      </div>
      </span>
        <div style="display:flex; justify-content:flex-end; padding-right:1.3rem;">
            <a href="#decom-details" style="font-size:24px; color:#38bdf8; text-decoration: none;">ðŸ‘€</a>
        </div>

    </div>
    ]

    L --> M{
      <div style="font-size:13px; line-height:0.6">
        <span style="display:block; text-align:center;">
            Details <br>
            Completed
        </span>
      </div>
    }

    M --> |YES| N[
        <div style="font-size:13px; line-height:0.6">
            <span style="display:block; text-align:center;">
                Double Check and Save the file <br>
                <strong>manualDecom.md</strong>
            </span>
        </div>
    ]
    O --> L
    M --> |NO| O[
    <div style="font-size:13px; line-height:0.6">
       <span style="display:block; text-align:left;">
            Get the <i><strong>Cluster Details</strong></i> and <i><strong>Identifier</strong></i> using ClusterID from Radar.
            <div style="text-align: center;">
              <strong>
                Dataplatform UI â†’ Resources â†’ Clusters â†’ Search
              </strong>
            </div>
        </span> 
        <div style="display:flex; justify-content:flex-end; padding-right:1.3rem;">
            <a href="#cluster-details" style="font-size:24px; color:#38bdf8; text-decoration: none;">ðŸ‘€</a>
        </div>
    </div>
    <div style="font-size:13px; line-height:0.6">
       <span style="display:block; text-align:left;">
            Get <i><strong>EKS Cluster ID</strong></i> using ClusterID from Radar in CRO.
            <div style="text-align: center;">
              <a href="#" style="color: white;">
                <strong>Cloud Runtime Operator</strong>
              </a>
            </div>
        </span> 
        <div style="display:flex; justify-content:flex-end; padding-right:1.3rem;">
            <a href="#eks-clusterid" style="font-size:24px; color:#38bdf8; text-decoration: none;">ðŸ‘€</a>
        </div>
    </div>
    <div style="font-size:13px; line-height:0.6">
       <span style="display:block; text-align:left;">
            Get <i><strong>Pipeline Details</strong></i> using EKS Cluster ID.
            <div style="text-align: center;">
              <a href="#" style="color: white;">
                <strong>notebooks-onboard-pipelines</strong>
              </a>
            </div>
        </span> 
        <div style="display:flex; justify-content:flex-end; padding-right:1.3rem;">
            <a href="#eks-clusterid" style="font-size:24px; color:#38bdf8; text-decoration: none;">ðŸ‘€</a>
        </div>
    </div>
    <div style="font-size:13px; line-height:0.6">
       <span style="display:block; text-align:left;">
            Get <i><strong>Radar Details</strong></i> by copying the link.
            <div style="text-align: center;">
              <strong>Go to Radar â†’ Edit â†’ Copy Link</strong>
            </div>
        </span> 
        <div style="display:flex; justify-content:flex-end; padding-right:1.3rem;">
            <a href="#radar-details" style="font-size:24px; color:#38bdf8; text-decoration: none;">ðŸ‘€</a>
        </div>
    </div>
    ]
    N --> P[<h2>Github Process</h2>]
    P --> Q[
    <div style="font-size:13px; line-height:0.6">
      
        <b style="font-size:15px;">PUSH YOUR CHANGES</b>

        <div style="padding-left: 0.6rem; text-align: left;">
          <strong>
            $ git add .<br>
            $ git status<br>
            $ git commit -m ''remove cluster <i style="text-decoration: underline;">ClusterID</i> in datapipelines''<br>
            $ git push origin main
          </strong>
        </div>
      
      </div>
    ]

    Q --> R[
    <div style="font-size:13px; line-height:0.6">
      
        <b style="font-size:15px;">CREATE PULL REQUEST</b>
            
        <span style="display:block; text-align:left;">
        1. Go to your Forked Repo. <br>
        2. Clicked the <i style="text-decoration: underline;">''1 commit ahead''.</i> <br>
        3. Review changes and submit a Pull Request. <br>
        4. Make sure PR has passed all checks before posting in internal. <br>
        </span>
      
      </div>
    ]

    R --> S[<h2>FOR POSTING</h2>]

    S --> T[
    <div style="font-size:13px; line-height:0.6">
      
        <b style="font-size:15px;">SLACK TEMPLATE</b>
            
        <span style="display:block; text-align:left;">
        :pr: Hi Team, created this PR to decommision cluster <i><strong style="text-decoration: underline;">ClusterID</strong></i> for review please. Thanks you! <br>
        â€¢ Radar request: <i style="text-decoration: underline;">radar-link-here</i><br>
        â€¢ PR Link: <i style="text-decoration: underline;">PR-link-here</i><br>
        cc: <i style="text-decoration: underline;">@On-call Dev</i>
        </span>
        <div style="display:flex; justify-content:flex-end; padding-right:1.3rem;">
          <a href="#slackdecomtemplate" style="font-size:24px; color:#38bdf8; text-decoration: none;">ðŸ‘€</a>
        </div>
      
      </div>
    ]

    T --> U[
      <div style="font-size:13px; line-height:0.6">
      
      <b style="font-size:15px;">WHEN PR IS MERGED UPDATE YOUR RADAR</b><br><br>
      
      <span style="display:block; text-align:left;">
        <strong>Assignee:</strong> Assign back to creator <br>
        <strong>State:</strong> Verify <br>
        <strong>Resolution:</strong> Item Completed <br>
        <strong>Set Proper Milestone</strong><br>
        <strong>Add Investigation Details:</strong><i> ''Hi Team, Successfully decomissioned notebooks for cluster <strong style="text-decoration: underline;">ClusterID</strong>. Thank you!''</i><br><br>
        PR: <i><strong>PR to decom</strong></i><br>
        Attach Screanshot of deleted pipeline.
      </span>

        <div style="display:flex; justify-content:flex-end; padding-right:1.3rem;">
            <a href="#radardecomtemplate" style="font-size:24px; color:#38bdf8; text-decoration: none;">ðŸ‘€</a>
        </div>
      
      </div>
    ]

    U --> V[
    <div style="font-size:13px; line-height:0.6">
      
      <b style="font-size:15px;">DataPlatform UI</b><br><br>

      <span style="display:block; text-align:left;">
      1. Go to <a href="#" style="text-decoration: none; color: white;"><strong>notebooks-onboard-pipeline</strong></a><div class=""></div>
      </span>
      <span style="display:block; text-align:left;">
      2. Delete the pipeline for that cluster.
      </span>
    </div>
    ]



      

    %% Make A invisible
    style A fill:none,stroke:none
    %% Make C invisible
    style C fill:none,stroke:none
    %% Make G invisible
    style G fill:none,stroke:none
    %% Make I invisible
    style I fill:none,stroke:none
    %% Make J invisible
    style J fill:none,stroke:none
    %% Make P invisible
    style P fill:none,stroke:none
    %% Make S invisible
    style S fill:none,stroke:none
        </div>

      </section>

    </section>
  </main>

  <!-- References -->
  <aside class="reference">
    <h4>References</h4>
    <a>Docs 1</a>
    <a>Docs 2</a>
    <a>Docs 3</a>
    <a>Docs 4</a>
    <a>Docs 5</a>
  </aside>

</div>

<script>
// Sidebar submenu toggle
document.querySelectorAll(".sidebar a.parent").forEach(parent => {
  const submenu = parent.nextElementSibling;
  submenu.style.display = "flex";
  parent.classList.add("open");

  parent.addEventListener("click", () => {
    const open = submenu.style.display !== "none";
    submenu.style.display = open ? "none" : "flex";
    parent.classList.toggle("open", !open);
  });
});

// Highlight submenu child
document.querySelectorAll(".sidebar .submenu a").forEach(child => {
  child.addEventListener("click", () => {
    document.querySelectorAll(".sidebar .submenu a").forEach(a => a.classList.remove("active"));
    child.classList.add("active");
  });
});

// Mermaid initialization (UNCHANGED)
mermaid.initialize({
  startOnLoad: true,
  theme: "dark",
  flowchart: {
    htmlLabels: true,
    curve: "basis",
    nodeSpacing: 20,
    rankSpacing: 50
  },
  themeVariables: {
    background: "#0f172a",
    primaryColor: "#020617",
    primaryBorderColor: "#334155",
    primaryTextColor: "#e5e7eb",
    lineColor: "#64748b",
    edgeLabelBackground: "#020617",
    fontFamily: "Inter, system-ui, sans-serif"
  }
});

// Ensure flowchart SVG adapts on window resize
window.addEventListener("resize", () => {
  document.querySelectorAll(".mermaid svg").forEach(svg => {
    svg.setAttribute("width", "100%");
  });
});

document.addEventListener("keydown", function(event) {
  if(event.key === "Escape") {
    // Close all modals
    document.querySelectorAll(".modal-wrapper:target").forEach(modal => {
      window.location.hash = ""; // remove target
    });
  }
});

</script>

<div id="radartemplate" class="modal-wrapper">
  <a href="#" class="modal-backdrop"></a>
  <div class="modal-content">
    <a href="#" class="modal-close"></a>
    <img src="images/wally.png" alt="Reference Image">
  </div>
</div>

<div id="model1" class="modal-wrapper">
  <a href="#" class="modal-backdrop"></a>
  <div class="modal-content">
    <a href="#" class="modal-close"></a>
    <img src="images/wally.png" alt="Reference Image">
  </div>
</div>

<div id="model2" class="modal-wrapper">
  <a href="#" class="modal-backdrop"></a>
  <div class="modal-content">
    <a href="#" class="modal-close"></a>
    <img src="images/wally.png" alt="Reference Image">
  </div>
</div>

<div id="decom-details" class="modal-wrapper">
  <a href="#" class="modal-backdrop"></a>
  <div class="modal-content">
    <a href="#" class="modal-close"></a>
    <img src="images/wally.png" alt="Reference Image">
  </div>
</div>

<div id="cluster-details" class="modal-wrapper">
  <a href="#" class="modal-backdrop"></a>
  <div class="modal-content">
    <a href="#" class="modal-close"></a>
    <img src="images/wally.png" alt="Reference Image">
  </div>
</div>

<div id="eks-clusterid" class="modal-wrapper">
  <a href="#" class="modal-backdrop"></a>
  <div class="modal-content">
    <a href="#" class="modal-close"></a>
    <img src="images/wally.png" alt="Reference Image">
  </div>
</div>

<div id="pipeline-details" class="modal-wrapper">
  <a href="#" class="modal-backdrop"></a>
  <div class="modal-content">
    <a href="#" class="modal-close"></a>
    <img src="images/wally.png" alt="Reference Image">
  </div>
</div>

<div id="radar-details" class="modal-wrapper">
  <a href="#" class="modal-backdrop"></a>
  <div class="modal-content">
    <a href="#" class="modal-close"></a>
    <img src="images/wally.png" alt="Reference Image">
  </div>
</div>

<div id="slackdecomtemplate" class="modal-wrapper">
  <a href="#" class="modal-backdrop"></a>
  <div class="modal-content">
    <a href="#" class="modal-close"></a>
    <img src="images/wally.png" alt="Reference Image">
  </div>
</div>

</body>
</html>
